<!doctype html>
<head>
<title>change password</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="static/favicon.ico" rel="icon" type="image/x-icon" />
<link rel="stylesheet" type="text/css" href="static/css/lib/bootstrap.min.css" />
<link rel="stylesheet" type="text/css"
    href="static/css/lib/bootstrap-theme.min.css" />
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="static/js/lib/jquery.serialize-object.js"></script>
<script>
  $(function() {
  $("form").submit(function(event) {
    event.preventDefault();
    var form = $("form").serializeJSON();
    if (form.newPassword != form.newPassword) {
      $("form")[0].reset();
      $("#msg").text("password mismatch");
    }
    $.ajax(
      "/unauthenticated-resources/user/change-password",
      {
        contentType : "application/json",
        data : $("form").serializeJSON(),
        type : "PUT"
      }).fail(function () {
        $("#msg").text("password change failed");
      }).done(function () {
        $("#msg").text("password changed");
        $("form")[0].reset();
    });
    })
  });
</script>
</head>
<body>
    <form action="" method="POST" class="form">
        <div class="form-group">
            <label for="user-name">User name</label>
            <input class="form-control" type="text" id="user-name" name="userName" />
        </div>
        <div class="form-group">
            <label for="old-password">old password</label>
            <input class="form-control" type="password" id="old-password" name="oldPassword" />
        </div>
        <div class="form-group">
            <label for="new-password">new password</label>
            <input class="form-control" type="password" id="new-password" name="newPassword" />
        </div>
        <div class="form-group">
            <label for="new-password">confirm new password</label>
            <input class="form-control" type="password" id="new-password" name="newPassword1" />
        </div>
        <button type="submit">Submit</button>
    </form>
    <div id="msg"/>
    <script>
    </script>
</body>
